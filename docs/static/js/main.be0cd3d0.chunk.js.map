{"version":3,"sources":["services/AutoComplete.ts","services/Search.ts","services/api.ts","components/rendered-component/RenderedComponent.tsx","components/block-comment/BlockComment.tsx","components/error-view/ErrorView.tsx","components/top-level-entry/TopLevelEntry.tsx","components/entities-panel/EntitiesPanel.tsx","components/top-level-entity-group/TopLevelEntityGroup.tsx","support/hooks.ts","store/querySlice.ts","store/viewedPathSlice.ts","components/home/Home.tsx","components/page/Page.tsx","store/pathsSlice.ts","support/util.ts","store/sidePanelVisibleSlice.ts","components/path-tree-item/PathTreeItem.tsx","components/side-panel/SidePanel.tsx","components/side-panel-button/SidePanelButton.tsx","components/search-panel/SearchPanel.tsx","components/github-icon/GitHubIcon.tsx","components/topbar/TopBar.tsx","App.tsx","store/store.ts","support/serviceWorker.ts","index.tsx","components/side-panel/SidePanel.module.css","components/path-tree-item/PathTreeItem.module.css","components/search-panel/SearchPanel.module.css","components/page/Page.module.css","components/top-level-entry/TopLevelEntry.module.css","components/entities-panel/EntitiesPanel.module.css","components/top-level-entity-group/TopLevelEntityGroup.module.css","components/error-view/ErrorView.module.css","App.module.css","components/block-comment/BlockComment.module.css","components/home/Home.module.css","components/topbar/TopBar.module.css","components/side-panel-button/SidePanelButton.module.css","components/github-icon/GitHubIcon.module.css"],"names":["TrieNode","isWord","children","this","Map","AutoComplete","root","word","addToTrie","toLowerCase","prefix","searchTrie","trieNode","index","length","c","has","set","subNode","get","node","findTrieLeaf","result","Set","getWordsUnder","Array","from","buffer","char","add","keys","substring","Search","data","searchIndex","collectionResult","fileResults","fileResult","entities","entity","words","key","pathSet","relativePath","query","terms","split","map","it","trim","filter","size","i","intersect","set1","set2","values","x","NetworkApiClient","a","axios","res","paths","homeHtml","path","params","suffixes","signature","StaticApiClient","searchClient","autoCompleteClient","allPaths","signatureToEntity","pathToFileResult","search","getSuffixes","client","getClient","window","MATHLINGUA_DATA","getAllPaths","getHomeHtml","getFileResult","getAutocompleteSuffixes","getEntityWithSignature","mathlinguaToggleDropdown","id","el","document","getElementById","className","RenderedComponent","props","ref","React","createRef","renderLatex","current","that","viewSignature","api","entityResult","onViewEntity","fnName","fnArgs","rawId","rawSignature","replace","options","Element","attribs","onclick","exec","onClick","processInnerClick","domToReact","parse","html","Component","connect","buildMathFragment","rawText","text","fragment","createDocumentFragment","appendChild","createTextNode","span","createElement","math","katex","render","throwOnError","displayMode","e","indexOf","isInWritten","childNodes","n","textContent","child","nodeType","replaceChild","BlockComment","styles","mathlinguaBlockCommentTopLevel","renderedHtml","ErrorView","errorMessage","errorLabel","message","TopLevelEntry","useState","showRendered","setShowRendered","mathlinguaTopLevel","showCloseButton","mathlinguaCloseButton","onEntityClosed","mathlinguaFlipIcon","rawHtml","EntitiesPanel","entitiesPanel","style","display","closeAllButton","onCloseAll","entitiesPanelItem","TopLevelEntityGroup","setEntities","concat","topLevelEntityGroup","triangleBorder","triangle","useAppDispatch","useDispatch","useAppSelector","useSelector","querySlice","createSlice","name","initialState","reducers","queryUpdated","state","action","payload","selectQuery","actions","undefined","viewedPathSlice","viewedPathUpdated","selectViewedPath","viewedPath","Home","error","setError","setHomeHtml","useEffect","then","catch","err","mathlinguaHome","Page","setFileResult","isLoading","setIsLoading","useRef","finally","markInstance","Mark","unmark","done","mark","caseSensitive","separateWordSearch","errorView","mathlinguaPage","pageView","type","pathsSlice","pathsUpdated","selectPaths","updatePathsForQuery","dispatch","isOnMobile","screen","width","sidePanelVisible","sidePanelVisibleSlice","sidePanelVisibilityChanged","selectSidePanelVisible","PathTreeItem","isExpanded","setIsExpanded","isDir","mathlinguaListDirItem","sidePanelItem","mathlinguaListFileItem","to","link","selected","SidePanel","visible","setAllPaths","pathData","setPathData","populateTreeNode","allPathsToTreeNode","sidePanel","minWidth","sidePanelContent","mathlinguaHomeItem","parts","cur","p","find","newChild","push","SidePanelButton","sidePanelButton","SearchPanel","setQuery","dropdownDisplayStyle","setDropdownDisplayStyle","suggestions","setSuggestions","selectedIndex","setSelectedIndex","getLastQueryWord","setDropDownVisible","event","target","value","lastWord","suffix","complete","appendSuggestionSuffix","completeQuery","preventDefault","selectedSuggestion","queryToUse","Math","min","max","addEventListener","contains","searchArea","onChange","onKeyUp","button","searchDropdown","suggestion","searchDropdownItemSelected","searchDropdownItem","GitHubIcon","githubIconContainer","href","fill","height","role","viewBox","xmlns","d","TopBar","topbar","App","contentPanel","ErrorBoundary","hasError","info","setState","store","configureStore","reducer","sidePanelVisibleReducer","pathsReducer","viewedPathReducer","queryReducer","middleware","thunkMiddleware","Boolean","location","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister","console","module","exports"],"mappings":"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","file":"static/js/main.be0cd3d0.chunk.js","sourcesContent":["class TrieNode {\n  isWord: boolean;\n  readonly children: Map<string, TrieNode>;\n\n  constructor(isWord: boolean) {\n    this.isWord = isWord;\n    this.children = new Map();\n  }\n}\n\nexport class AutoComplete {\n  private root = new TrieNode(false);\n\n  add(word: string) {\n    this.addToTrie(this.root, word.toLowerCase(), 0);\n  }\n\n  getSuffixes(prefix: string) {\n    return this.searchTrie(this.root, prefix.toLowerCase());\n  }\n\n  private addToTrie(trieNode: TrieNode, word: string, index: number) {\n    if (index >= word.length) {\n      return;\n    }\n\n    const c = word[index];\n    if (!trieNode.children.has(c)) {\n      trieNode.children.set(c, {\n        isWord: index === word.length - 1,\n        children: new Map(),\n      });\n    }\n\n    const subNode = trieNode.children.get(c)!;\n    if (index === word.length - 1) {\n      subNode.isWord = true;\n    }\n\n    this.addToTrie(subNode, word, index + 1);\n  }\n\n  private searchTrie(trieNode: TrieNode, word: string) {\n    const node = this.findTrieLeaf(trieNode, word, 0);\n    if (!node) {\n      return [];\n    }\n    const result = new Set<string>();\n    this.getWordsUnder('', '', node, result);\n    return Array.from(result);\n  }\n\n  private findTrieLeaf(\n    trieNode: TrieNode,\n    word: string,\n    index: number\n  ): TrieNode | null {\n    if (index >= word.length) {\n      return trieNode;\n    }\n\n    const c = word[index];\n    if (trieNode.children.has(c)) {\n      return this.findTrieLeaf(trieNode.children.get(c)!, word, index + 1);\n    }\n\n    return null;\n  }\n\n  private getWordsUnder(\n    buffer: string,\n    char: string,\n    trieNode: TrieNode,\n    result: Set<string>\n  ) {\n    if (!trieNode) {\n      return;\n    }\n\n    buffer += char;\n    if (trieNode.isWord) {\n      result.add(buffer);\n    }\n\n    for (const c of trieNode.children.keys() as any) {\n      this.getWordsUnder(buffer, c, trieNode.children.get(c)!, result);\n    }\n\n    buffer = buffer.substring(0, buffer.length - 1);\n  }\n}\n","import { DecompositionResult } from './api';\n\nexport class Search {\n  //                       word  -> set of paths\n  private searchIndex: Map<string, Set<string>> = new Map();\n\n  constructor(data: DecompositionResult) {\n    for (const fileResult of data.collectionResult.fileResults) {\n      for (const entity of fileResult.entities) {\n        for (const word of entity.words) {\n          const key = word.toLowerCase();\n          const pathSet = this.searchIndex.get(key) ?? new Set();\n          pathSet.add(fileResult.relativePath);\n          this.searchIndex.set(key, pathSet);\n        }\n      }\n    }\n  }\n\n  search(query: string): string[] {\n    const terms = query\n      .split(' ')\n      .map((it) => it.trim().toLowerCase())\n      .filter((it) => it.length > 0);\n    if (terms.length === 0) {\n      return [];\n    }\n\n    let result = this.searchIndex.get(terms[0]) ?? new Set();\n    if (result.size === 0) {\n      return [];\n    }\n\n    for (let i = 1; i < terms.length; i++) {\n      result = intersect(result, this.searchIndex.get(terms[i]) ?? new Set());\n    }\n\n    return Array.from(result);\n  }\n}\n\nfunction intersect(set1: Set<string>, set2: Set<string>): Set<string> {\n  if (set2.size > set1.size) {\n    return intersect(set2, set1);\n  }\n\n  const result: Set<string> = new Set();\n  for (const x of Array.from(set1.values())) {\n    if (set2.has(x)) {\n      result.add(x);\n    }\n  }\n  return result;\n}\n","import axios from 'axios';\nimport { AutoComplete } from './AutoComplete';\nimport { Search } from './Search';\n\nexport interface EntityResult {\n  id: string;\n  type: string;\n  signature: string;\n  rawHtml: string;\n  renderedHtml: string;\n  words: string[];\n}\n\nexport interface FileResult {\n  relativePath: string;\n  content: string;\n  entities: EntityResult[];\n}\n\nexport interface ErrorResult {\n  relativePath: string;\n  message: string;\n  row: number;\n  column: number;\n}\n\nexport interface CollectionResult {\n  fileResults: FileResult[];\n  errors: ErrorResult[];\n}\n\nexport interface DecompositionResult {\n  homeHtml: string;\n  collectionResult: CollectionResult;\n}\n\ninterface ApiClient {\n  getAllPaths(): Promise<string[]>;\n  getHomeHtml(): Promise<string>;\n  getFileResult(path: string): Promise<FileResult | undefined>;\n  search(query: string): Promise<string[]>;\n  getAutocompleteSuffixes(word: string): Promise<string[]>;\n  getEntityWithSignature(signature: string): Promise<EntityResult | undefined>;\n}\n\nclass NetworkApiClient implements ApiClient {\n  async getAllPaths(): Promise<string[]> {\n    const res = await axios.get('/api/allPaths');\n    return res.data.paths;\n  }\n\n  async getHomeHtml(): Promise<string> {\n    const res = await axios.get('/api/home');\n    return res.data.homeHtml;\n  }\n\n  async getFileResult(path: string): Promise<FileResult | undefined> {\n    const res = await axios.get('/api/fileResult', {\n      params: { path },\n    });\n    return res.data;\n  }\n\n  async search(query: string): Promise<string[]> {\n    const res = await axios.get('/api/search', { params: { query } });\n    return res.data.paths;\n  }\n\n  async getAutocompleteSuffixes(word: string): Promise<string[]> {\n    const res = await axios.get('/api/completeWord', { params: { word } });\n    return res.data.suffixes;\n  }\n\n  async getEntityWithSignature(\n    signature: string\n  ): Promise<EntityResult | undefined> {\n    const res = await axios.get('/api/withSignature', {\n      params: { signature },\n    });\n    return res.data;\n  }\n}\n\nclass StaticApiClient implements ApiClient {\n  private searchClient: Search;\n  private autoCompleteClient: AutoComplete;\n  private allPaths: string[];\n  private signatureToEntity: Map<string, EntityResult>;\n  private homeHtml: string;\n  private pathToFileResult: Map<string, FileResult>;\n\n  constructor(data: DecompositionResult) {\n    this.searchClient = new Search(data);\n    this.autoCompleteClient = new AutoComplete();\n    for (const fileResult of data.collectionResult.fileResults) {\n      for (const entity of fileResult.entities) {\n        for (const word of entity.words) {\n          this.autoCompleteClient.add(word);\n        }\n      }\n    }\n\n    this.allPaths = data.collectionResult.fileResults.map(\n      (fileResult) => fileResult.relativePath\n    );\n\n    this.signatureToEntity = new Map();\n    for (const fileResult of data.collectionResult.fileResults) {\n      for (const entity of fileResult.entities) {\n        this.signatureToEntity.set(entity.signature, entity);\n      }\n    }\n\n    this.homeHtml = data.homeHtml;\n\n    this.pathToFileResult = new Map();\n    for (const fileResult of data.collectionResult.fileResults) {\n      this.pathToFileResult.set(fileResult.relativePath, fileResult);\n    }\n  }\n\n  async getAllPaths(): Promise<string[]> {\n    return this.allPaths;\n  }\n\n  async getHomeHtml(): Promise<string> {\n    return this.homeHtml;\n  }\n\n  async getFileResult(path: string): Promise<FileResult | undefined> {\n    return this.pathToFileResult.get(path);\n  }\n\n  async search(query: string): Promise<string[]> {\n    return this.searchClient.search(query);\n  }\n\n  async getAutocompleteSuffixes(word: string): Promise<string[]> {\n    return this.autoCompleteClient.getSuffixes(word);\n  }\n\n  async getEntityWithSignature(\n    signature: string\n  ): Promise<EntityResult | undefined> {\n    return this.signatureToEntity.get(signature);\n  }\n}\n\nlet client: ApiClient | null = null;\nfunction getClient(): ApiClient {\n  if (!client) {\n    const data = (window as any).MATHLINGUA_DATA;\n    if (data) {\n      client = new StaticApiClient(data);\n    } else {\n      client = new NetworkApiClient();\n    }\n  }\n  return client;\n}\n\nexport async function getAllPaths(): Promise<string[]> {\n  return getClient().getAllPaths();\n}\n\nexport async function getHomeHtml(): Promise<string> {\n  return getClient().getHomeHtml();\n}\n\nexport async function getFileResult(\n  path: string\n): Promise<FileResult | undefined> {\n  return getClient().getFileResult(path);\n}\n\nexport async function search(query: string): Promise<string[]> {\n  return getClient().search(query);\n}\n\nexport async function getAutocompleteSuffixes(word: string): Promise<string[]> {\n  return getClient().getAutocompleteSuffixes(word);\n}\n\nexport async function getEntityWithSignature(\n  signature: string\n): Promise<EntityResult | undefined> {\n  return getClient().getEntityWithSignature(signature);\n}\n","import parse, { DOMNode, domToReact } from 'html-react-parser';\nimport { Element } from 'domhandler/lib/node';\n\nimport React from 'react';\nimport './RenderedComponent.css';\nimport * as api from '../../services/api';\nimport { connect } from 'react-redux';\n\ndeclare const katex: any;\n\nexport interface RenderedComponentProps {\n  html: string;\n  onViewEntity?: (entity: api.EntityResult) => void;\n}\n\nfunction mathlinguaToggleDropdown(id: string) {\n  const el = document.getElementById(id);\n  if (el) {\n    if (el.className === 'mathlingua-dropdown-menu-hidden') {\n      el.className = 'mathlingua-dropdown-menu-shown';\n    } else {\n      el.className = 'mathlingua-dropdown-menu-hidden';\n    }\n  }\n}\n\nclass RenderedComponent extends React.Component<RenderedComponentProps> {\n  private ref: any;\n\n  constructor(props: RenderedComponentProps) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  componentDidMount() {\n    renderLatex(this.ref.current);\n  }\n\n  componentDidUpdate() {\n    renderLatex(this.ref.current);\n  }\n\n  render() {\n    const that = this;\n    async function viewSignature(signature: string, id: string) {\n      mathlinguaToggleDropdown(id);\n      const entityResult = await api.getEntityWithSignature(signature);\n      if (entityResult && that.props.onViewEntity) {\n        that.props.onViewEntity(entityResult);\n      }\n    }\n\n    async function processInnerClick(fnName: string, fnArgs: string[]) {\n      if (fnName === 'mathlinguaToggleDropdown') {\n        const rawId = fnArgs[0];\n        if (!rawId) {\n          return;\n        }\n        // the raw id is enclosed in either single or double quotes\n        const id = rawId.substring(1, rawId.length - 1);\n        mathlinguaToggleDropdown(id);\n      } else if (fnName === 'mathlinguaViewSignature') {\n        const rawSignature = fnArgs[0];\n        const rawId = fnArgs[1];\n        if (!rawSignature || !rawId) {\n          return;\n        }\n        // the javascript code has the backslashes escaped\n        // thus they need to be un-escaped to get the actual signature\n        const signature = rawSignature\n          .substring(1, rawSignature.length - 1)\n          .replace(/\\\\\\\\/, '\\\\');\n        const id = rawId.substring(1, rawId.length - 1);\n        viewSignature(signature, id);\n      }\n    }\n\n    const options = {\n      replace: (node: DOMNode) => {\n        if (\n          !(node instanceof Element) ||\n          !node.attribs ||\n          !node.attribs.onclick\n        ) {\n          return;\n        }\n\n        const onclick = node.attribs.onclick;\n        delete node.attribs.onclick;\n\n        const className = node.attribs['class'];\n        delete node.attribs['class'];\n\n        const exec = /([a-zA-Z0-9]+)\\((.*?)\\)/.exec(onclick.trim());\n        if (exec && exec.length === 3) {\n          const fnName = exec[1];\n          const fnArgs = exec[2].split(',').map((it) => it.trim());\n          return (\n            <span\n              className={className}\n              onClick={() => processInnerClick(fnName, fnArgs)}\n            >\n              {domToReact(node.children, options)}\n            </span>\n          );\n        }\n      },\n    };\n    return <div ref={this.ref}>{parse(this.props.html, options)}</div>;\n  }\n}\n\nexport default connect()(RenderedComponent);\n\nfunction buildMathFragment(rawText: string) {\n  let text = rawText;\n  if (text[0] === '\"') {\n    text = text.substring(1);\n  }\n  if (text[text.length - 1] === '\"') {\n    text = text.substring(0, text.length - 1);\n  }\n  text = text.replace(/([a-zA-Z0-9])\\?\\??/g, '$1');\n  const fragment = document.createDocumentFragment();\n  let buffer = '';\n  let i = 0;\n  while (i < text.length) {\n    if (text[i] === '$' && text[i + 1] === '$' && text[i + 2] === '$') {\n      i += 3; // skip over the $s\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      let math = '';\n      while (\n        i < text.length &&\n        !(text[i] === '$' && text[i + 1] === '$' && text[i + 2] === '$')\n      ) {\n        math += text[i++];\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      if (text[i] === '$') {\n        i++; // move past the second $\n      }\n      if (text[i] === '$') {\n        i++; // move past the third $\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: false,\n        });\n      } catch (e) {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '\\\\' && text[i + 1] === '[') {\n      i += 2; // skip over \\ and [\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      span.className = 'display-mode';\n      let math = '';\n      while (i < text.length && !(text[i] === '\\\\' && text[i + 1] === ']')) {\n        math += text[i++];\n      }\n      if (text[i] === '\\\\') {\n        i++; // move past the \\\n      }\n      if (text[i] === ']') {\n        i++; // move past the ]\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: true,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '\\\\' && text[i + 1] === '(') {\n      i += 2; // skip over \\ and ()\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      let math = '';\n      while (i < text.length && !(text[i] === '\\\\' && text[i + 1] === ')')) {\n        math += text[i++];\n      }\n      if (text[i] === '\\\\') {\n        i++; // move past the \\\n      }\n      if (text[i] === ')') {\n        i++; // move past the )\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: false,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '$' && text[i + 1] === '$') {\n      i += 2; // skip over $ and $\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      span.className = 'display-mode';\n      let math = '';\n      while (i < text.length && !(text[i] === '$' && text[i + 1] === '$')) {\n        math += text[i++];\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: true,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else if (text[i] === '$') {\n      i++; // skip over the $\n      fragment.appendChild(document.createTextNode(buffer));\n      buffer = '';\n\n      const span = document.createElement('span');\n      let math = '';\n      while (i < text.length && text[i] !== '$') {\n        math += text[i++];\n      }\n      if (text[i] === '$') {\n        i++; // move past the $\n      }\n      try {\n        katex.render(math, span, {\n          throwOnError: true,\n          displayMode: false,\n        });\n      } catch {\n        span.appendChild(document.createTextNode(math));\n      }\n      fragment.appendChild(span);\n    } else {\n      buffer += text[i++];\n    }\n  }\n\n  if (buffer.length > 0) {\n    fragment.appendChild(document.createTextNode(buffer));\n  }\n\n  return fragment;\n}\n\nfunction renderLatex(node: any) {\n  if (\n    node.className &&\n    node.className.indexOf &&\n    node.className.indexOf('no-render') >= 0\n  ) {\n    return;\n  }\n\n  let isInWritten = false;\n  if (node.className === 'mathlingua') {\n    for (let i = 0; i < node.childNodes.length; i++) {\n      const n = node.childNodes[i];\n      if (\n        n &&\n        n.className === 'mathlingua-header' &&\n        n.textContent === 'written:'\n      ) {\n        isInWritten = true;\n        break;\n      }\n    }\n  }\n\n  for (let i = 0; i < node.childNodes.length; i++) {\n    const child = node.childNodes[i];\n\n    // node is an element node => nodeType === 1\n    // node is an attribute node => nodeType === 2\n    // node is a text node => nodeType === 3\n    // node is a comment node => nodeType === 8\n    if (child.nodeType === 3) {\n      let text = child.textContent;\n      if (text.trim()) {\n        if (isInWritten) {\n          // if the text is in a written: section\n          // turn \"some text\" to $$$some text$$$\n          // so the text is in math mode\n          if (text[0] === '\"') {\n            text = text.substring(1);\n          }\n          if (text[text.length - 1] === '\"') {\n            text = text.substring(0, text.length - 1);\n          }\n          text = '$$$' + text + '$$$';\n        }\n        const fragment = buildMathFragment(text);\n        i += fragment.childNodes.length - 1;\n        node.replaceChild(fragment, child);\n      }\n    } else if (child.nodeType === 1) {\n      renderLatex(child);\n    }\n  }\n}\n","import RenderedComponent from '../rendered-component/RenderedComponent';\nimport styles from './BlockComment.module.css';\n\nexport interface BlockCommentProps {\n  rawHtml: string;\n  renderedHtml: string;\n}\n\nexport const BlockComment = (props: BlockCommentProps) => {\n  return (\n    <div className={styles.mathlinguaBlockCommentTopLevel}>\n      <RenderedComponent html={props.renderedHtml} />\n    </div>\n  );\n};\n","import styles from './ErrorView.module.css';\n\ninterface ErrorViewProps {\n  message: string;\n}\n\nexport function ErrorView(props: ErrorViewProps) {\n  return (\n    <div className={styles.errorMessage}>\n      <span className={styles.errorLabel}>ERROR:</span> {props.message}\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport RenderedComponent from '../rendered-component/RenderedComponent';\nimport styles from './TopLevelEntry.module.css';\n\nimport { EntityResult } from '../../services/api';\n\nexport interface TopLevelEntryProps {\n  id: string;\n  showCloseButton: boolean;\n  rawHtml: string;\n  renderedHtml: string;\n  onViewEntity?: (entity: EntityResult) => void;\n  onEntityClosed?: (id: string) => void;\n}\n\nexport const TopLevelEntry = (props: TopLevelEntryProps) => {\n  const [showRendered, setShowRendered] = useState(true);\n\n  return (\n    <div className={styles.mathlinguaTopLevel}>\n      {props.showCloseButton ? (\n        <button\n          className={styles.mathlinguaCloseButton}\n          onClick={() => {\n            if (props.onEntityClosed) {\n              props.onEntityClosed(props.id);\n            }\n          }}\n        >\n          &#x2715;\n        </button>\n      ) : null}\n      <button\n        className={styles.mathlinguaFlipIcon}\n        onClick={() => {\n          setShowRendered(!showRendered);\n        }}\n      >\n        â€¢\n      </button>\n      {showRendered ? (\n        <RenderedComponent\n          onViewEntity={props.onViewEntity}\n          html={props.renderedHtml}\n        />\n      ) : (\n        <RenderedComponent\n          onViewEntity={props.onViewEntity}\n          html={props.rawHtml}\n        />\n      )}\n    </div>\n  );\n};\n","import { EntityResult } from '../../services/api';\nimport { TopLevelEntry } from '../top-level-entry/TopLevelEntry';\nimport styles from './EntitiesPanel.module.css';\n\nexport interface EntitiesPanelProps {\n  entities: EntityResult[];\n  onViewEntity?: (entity: EntityResult) => void;\n  onEntityClosed?: (id: string) => void;\n  onCloseAll?: () => void;\n}\n\nexport const EntitiesPanel = (props: EntitiesPanelProps) => {\n  return (\n    <div\n      className={styles.entitiesPanel}\n      style={\n        props.entities.length > 0 ? { display: 'block' } : { display: 'none' }\n      }\n    >\n      <div>\n        <button\n          className={styles.closeAllButton}\n          onClick={() => {\n            if (props.onCloseAll) {\n              props.onCloseAll();\n            }\n          }}\n        >\n          &#x2715;\n        </button>\n        {props.entities.map((entityResult) => (\n          <span key={entityResult.id} className={styles.entitiesPanelItem}>\n            <TopLevelEntry\n              id={entityResult.id}\n              showCloseButton={true}\n              rawHtml={entityResult.rawHtml}\n              renderedHtml={entityResult.renderedHtml}\n              onViewEntity={props.onViewEntity}\n              onEntityClosed={props.onEntityClosed}\n            />\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport { EntityResult } from '../../services/api';\nimport { EntitiesPanel } from '../entities-panel/EntitiesPanel';\nimport { TopLevelEntry } from '../top-level-entry/TopLevelEntry';\nimport styles from './TopLevelEntityGroup.module.css';\n\nexport interface TopLevelEntityGroupProps {\n  entity: EntityResult;\n}\n\nexport const TopLevelEntityGroup = (props: TopLevelEntityGroupProps) => {\n  const [entities, setEntities] = useState([] as EntityResult[]);\n\n  const onViewEntity = (entity: EntityResult) => {\n    setEntities(entities.concat(entity));\n  };\n\n  const onEntityClosed = (id: string) => {\n    setEntities(entities.filter((entity) => entity.id !== id));\n  };\n\n  return (\n    <div className={styles.topLevelEntityGroup}>\n      <TopLevelEntry\n        id={props.entity.id}\n        rawHtml={props.entity.rawHtml}\n        renderedHtml={props.entity.renderedHtml}\n        showCloseButton={false}\n        onViewEntity={onViewEntity}\n        onEntityClosed={onEntityClosed}\n      />\n      {entities.length > 0 ? (\n        <div className={styles.triangleBorder}>\n          <div className={styles.triangle}></div>\n        </div>\n      ) : null}\n      <EntitiesPanel\n        onViewEntity={onViewEntity}\n        onEntityClosed={onEntityClosed}\n        entities={entities}\n        onCloseAll={() => setEntities([])}\n      />\n    </div>\n  );\n};\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from '../store/store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\n\nexport interface QueryState {\n  query: string;\n}\n\nconst initialState: QueryState = {\n  query: '',\n};\n\nconst querySlice = createSlice({\n  name: 'query',\n  initialState,\n  reducers: {\n    queryUpdated(state: QueryState, action: PayloadAction<string>) {\n      state.query = action.payload;\n    },\n  },\n});\n\nexport const selectQuery = (state: RootState) => state.query.query;\n\nexport const { queryUpdated } = querySlice.actions;\n\nexport default querySlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\n\nexport interface ViewedPathState {\n  path: string | undefined;\n}\n\nconst initialState: ViewedPathState = {\n  path: undefined,\n};\n\nconst viewedPathSlice = createSlice({\n  name: 'viewedFile',\n  initialState,\n  reducers: {\n    viewedPathUpdated(\n      state: ViewedPathState,\n      action: PayloadAction<string | undefined>\n    ) {\n      state.path = action.payload;\n    },\n  },\n});\n\nexport const selectViewedPath = (state: RootState) => state.viewedPath.path;\n\nexport const { viewedPathUpdated } = viewedPathSlice.actions;\n\nexport default viewedPathSlice.reducer;\n","import { useEffect, useState } from 'react';\nimport RenderedComponent from '../rendered-component/RenderedComponent';\nimport { ErrorView } from '../error-view/ErrorView';\nimport styles from './Home.module.css';\n\nimport * as api from '../../services/api';\nexport const Home = () => {\n  const [error, setError] = useState('');\n  const [homeHtml, setHomeHtml] = useState('');\n\n  useEffect(() => {\n    api\n      .getHomeHtml()\n      .then((html) => {\n        setHomeHtml(html);\n      })\n      .catch((err) => setError(err.message));\n  }, []);\n\n  if (!homeHtml) {\n    return null;\n  }\n\n  return (\n    <div className={styles.mathlinguaHome} data-testid=\"home\">\n      {error ? (\n        <ErrorView message={error} />\n      ) : (\n        <RenderedComponent html={homeHtml} />\n      )}\n    </div>\n  );\n};\n","import Mark from 'mark.js';\nimport { BlockComment } from '../block-comment/BlockComment';\nimport styles from './Page.module.css';\n\nimport * as api from '../../services/api';\nimport { useEffect, useRef, useState } from 'react';\nimport { ErrorView } from '../error-view/ErrorView';\nimport { TopLevelEntityGroup } from '../top-level-entity-group/TopLevelEntityGroup';\nimport { useAppSelector } from '../../support/hooks';\nimport { selectQuery } from '../../store/querySlice';\n\nimport { selectViewedPath } from '../../store/viewedPathSlice';\nimport { Home } from '../home/Home';\n\nexport const Page = () => {\n  const relativePath = useAppSelector(selectViewedPath) || '';\n  const [fileResult, setFileResult] = useState(\n    undefined as api.FileResult | undefined\n  );\n  const [error, setError] = useState('');\n  const query = useAppSelector(selectQuery);\n  const [isLoading, setIsLoading] = useState(true);\n  const ref = useRef(null);\n\n  useEffect(() => {\n    if (relativePath !== '') {\n      api\n        .getFileResult(relativePath)\n        .then((fileResult) => setFileResult(fileResult))\n        .catch((err) => setError(err.message))\n        .finally(() => setIsLoading(false));\n    }\n  }, [relativePath]);\n\n  useEffect(() => {\n    if (ref.current) {\n      const markInstance = new Mark(ref.current!);\n      markInstance.unmark({\n        done: () => {\n          if (query.length > 0) {\n            markInstance.mark(query, {\n              caseSensitive: false,\n              separateWordSearch: true,\n            });\n          }\n        },\n      });\n    }\n  }, [relativePath, fileResult, query]);\n\n  if (relativePath === '') {\n    return <Home />;\n  }\n\n  const errorView = (\n    <div className={styles.mathlinguaPage}>\n      <ErrorView message={error} />\n    </div>\n  );\n\n  if (!fileResult && !isLoading) {\n    return (\n      <div className={styles.mathlinguaPage}>\n        <ErrorView message=\"Page Not Found\" />\n      </div>\n    );\n  }\n\n  if (!fileResult || fileResult.entities.length === 0) {\n    return null;\n  }\n\n  const pageView = (\n    <div className={styles.mathlinguaPage}>\n      {fileResult?.entities.map((entityResult) => (\n        <span key={entityResult.id}>\n          {entityResult.type === 'TopLevelBlockComment' ? (\n            <BlockComment\n              renderedHtml={entityResult.renderedHtml}\n              rawHtml={entityResult.rawHtml}\n            />\n          ) : (\n            <TopLevelEntityGroup entity={entityResult} />\n          )}\n        </span>\n      ))}\n    </div>\n  );\n\n  return <div ref={ref}>{error ? errorView : pageView}</div>;\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { AppThunk, RootState } from './store';\nimport * as api from '../services/api';\n\nexport interface PathsState {\n  paths: string[] | undefined;\n}\n\nconst initialState: PathsState = {\n  paths: [],\n};\n\nconst pathsSlice = createSlice({\n  name: 'paths',\n  initialState,\n  reducers: {\n    pathsUpdated(\n      state: PathsState,\n      action: PayloadAction<string[] | undefined>\n    ) {\n      if (!action.payload) {\n        state.paths = action.payload;\n      } else {\n        state.paths = [...action.payload];\n      }\n    },\n  },\n});\n\nexport const selectPaths = (state: RootState) => state.paths.paths;\n\nexport const { pathsUpdated } = pathsSlice.actions;\n\nexport const updatePathsForQuery =\n  (query: string): AppThunk =>\n  async (dispatch) => {\n    const paths = await api.search(query);\n    dispatch(pathsUpdated(paths));\n  };\n\nexport default pathsSlice.reducer;\n","export function isOnMobile() {\n  return window.screen.width <= 500;\n}\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from './store';\nimport { isOnMobile } from '../support/util';\n\nexport interface SidePanelVisibleState {\n  sidePanelVisible: boolean;\n}\n\nconst initialState: SidePanelVisibleState = {\n  sidePanelVisible: !isOnMobile(),\n};\n\nconst sidePanelVisibleSlice = createSlice({\n  name: 'sidePanelVisible',\n  initialState,\n  reducers: {\n    sidePanelVisibilityChanged(\n      state: SidePanelVisibleState,\n      action: PayloadAction<boolean>\n    ) {\n      state.sidePanelVisible = action.payload;\n    },\n  },\n});\n\nexport const selectSidePanelVisible = (state: RootState) =>\n  state.sidePanelVisible.sidePanelVisible;\n\nexport const { sidePanelVisibilityChanged } = sidePanelVisibleSlice.actions;\n\nexport default sidePanelVisibleSlice.reducer;\n","import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './PathTreeItem.module.css';\n\nimport { sidePanelVisibilityChanged } from '../../store/sidePanelVisibleSlice';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport { isOnMobile } from '../../support/util';\nimport {\n  selectViewedPath,\n  viewedPathUpdated,\n} from '../../store/viewedPathSlice';\n\nexport interface PathTreeNode {\n  name: string;\n  isDir: boolean;\n  path?: string;\n  children: PathTreeNode[];\n}\n\nexport interface PathTreeItemProps {\n  node: PathTreeNode;\n}\n\nexport const PathTreeItem = (props: PathTreeItemProps) => {\n  const dispatch = useAppDispatch();\n  const [isExpanded, setIsExpanded] = useState(false);\n  const viewedPath = useAppSelector(selectViewedPath) || '';\n\n  if (props.node.isDir) {\n    return (\n      <span>\n        <li\n          className={styles.mathlinguaListDirItem + ' ' + styles.sidePanelItem}\n          onClick={() => setIsExpanded(!isExpanded)}\n        >\n          {isExpanded ? (\n            <button className={styles.triangle}>&#9662;</button>\n          ) : (\n            <button className={styles.triangle}>&#9656;</button>\n          )}\n          {props.node.name.replace('_', ' ')}\n        </li>\n        {isExpanded ? (\n          <ul>\n            {props.node.children.map((child) => (\n              <PathTreeItem key={child.name} node={child} />\n            ))}\n          </ul>\n        ) : null}\n      </span>\n    );\n  }\n\n  return (\n    <li className={styles.mathlinguaListFileItem + ' ' + styles.sidePanelItem}>\n      <Link\n        to={`/${props.node.path}`}\n        key={props.node.name}\n        className={\n          viewedPath === props.node.path\n            ? `${styles.link} ${styles.selected}`\n            : styles.link\n        }\n        onClick={() => {\n          if (isOnMobile()) {\n            dispatch(sidePanelVisibilityChanged(false));\n          }\n          dispatch(viewedPathUpdated(props.node.path));\n        }}\n      >\n        {props.node.name.replace('.math', '').replace('_', ' ')}\n      </Link>\n    </li>\n  );\n};\n","import styles from './SidePanel.module.css';\n\nimport { useEffect, useState } from 'react';\nimport { pathsUpdated, selectPaths } from '../../store/pathsSlice';\nimport * as api from '../../services/api';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\nimport { selectSidePanelVisible } from '../../store/sidePanelVisibleSlice';\nimport { ErrorView } from '../error-view/ErrorView';\nimport { isOnMobile } from '../../support/util';\nimport { Link } from 'react-router-dom';\nimport { PathTreeItem, PathTreeNode } from '../path-tree-item/PathTreeItem';\nimport {\n  selectViewedPath,\n  viewedPathUpdated,\n} from '../../store/viewedPathSlice';\n\nexport const SidePanel = () => {\n  const dispatch = useAppDispatch();\n  const visible = useAppSelector(selectSidePanelVisible);\n  const paths = useAppSelector(selectPaths);\n  const viewedPath = useAppSelector(selectViewedPath) || '';\n\n  const [allPaths, setAllPaths] = useState([] as string[]);\n  const [error, setError] = useState('');\n  const [pathData, setPathData] = useState({\n    name: '',\n    isDir: true,\n    path: undefined,\n    children: [],\n  } as PathTreeNode);\n\n  useEffect(() => {\n    api\n      .getAllPaths()\n      .then((paths) => {\n        setAllPaths(paths);\n        dispatch(pathsUpdated(paths));\n      })\n      .catch((err) => setError(err.message));\n  }, [dispatch]);\n\n  useEffect(() => {\n    const pathsToView = paths ?? allPaths;\n    setPathData(allPathsToTreeNode(pathsToView));\n  }, [allPaths, paths]);\n\n  const errorView = (\n    <div className={styles.sidePanel}>\n      <ErrorView message={error} />\n    </div>\n  );\n\n  const style = visible\n    ? isOnMobile()\n      ? {\n          width: '100%',\n        }\n      : {\n          minWidth: '15em',\n        }\n    : {\n        width: '0',\n      };\n\n  const sidePanel = (\n    <div style={style} className={styles.sidePanel}>\n      <div className={styles.sidePanelContent}>\n        <Link\n          to=\"/\"\n          key=\"home\"\n          className={\n            !viewedPath\n              ? `${styles.sidePanelItem} ${styles.mathlinguaHomeItem} ${styles.mathlinguaListFileItem} ${styles.selected}`\n              : `${styles.sidePanelItem} ${styles.mathlinguaHomeItem} ${styles.mathlinguaListFileItem}`\n          }\n          onClick={() => {\n            dispatch(viewedPathUpdated(''));\n          }}\n        >\n          <div>Home</div>\n        </Link>\n        <hr />\n        {pathData.children[0]?.children?.map((node) => (\n          <PathTreeItem key={node.name} node={node} />\n        ))}\n      </div>\n    </div>\n  );\n\n  return error ? errorView : sidePanel;\n};\n\nfunction allPathsToTreeNode(allPaths: string[]): PathTreeNode {\n  const root: PathTreeNode = {\n    name: '',\n    isDir: true,\n    path: undefined,\n    children: [],\n  };\n  for (const path of allPaths) {\n    populateTreeNode(root, path);\n  }\n  return root;\n}\n\nfunction populateTreeNode(root: PathTreeNode, path: string) {\n  const parts = path.split('/');\n  let cur = root;\n  for (let i = 0; i < parts.length; i++) {\n    const p = parts[i];\n    const child = cur.children.find((child) => child.name === p);\n    if (child) {\n      cur = child;\n    } else {\n      const isDir = i !== parts.length - 1;\n      const newChild: PathTreeNode = {\n        name: p,\n        isDir,\n        path: isDir ? undefined : path,\n        children: [],\n      };\n      cur.children.push(newChild);\n      cur = newChild;\n    }\n  }\n}\n","import styles from './SidePanelButton.module.css';\n\nimport {\n  selectSidePanelVisible,\n  sidePanelVisibilityChanged,\n} from '../../store/sidePanelVisibleSlice';\nimport { useAppDispatch, useAppSelector } from '../../support/hooks';\n\nexport const SidePanelButton = () => {\n  const visible = useAppSelector(selectSidePanelVisible);\n  const dispatch = useAppDispatch();\n\n  return (\n    <button\n      className={styles.sidePanelButton}\n      onClick={() => {\n        dispatch(sidePanelVisibilityChanged(!visible));\n      }}\n    >\n      &#x2630;\n    </button>\n  );\n};\n","import { useEffect, useRef, useState } from 'react';\nimport styles from './SearchPanel.module.css';\n\nimport * as api from '../../services/api';\n\nimport { pathsUpdated, updatePathsForQuery } from '../../store/pathsSlice';\nimport { useDispatch } from 'react-redux';\nimport { queryUpdated } from '../../store/querySlice';\nimport { sidePanelVisibilityChanged } from '../../store/sidePanelVisibleSlice';\n\ninterface Suggestion {\n  complete: string;\n  suffix: string;\n}\n\nexport const SearchPanel = () => {\n  const dispatch = useDispatch();\n  const ref = useRef(null);\n  const [query, setQuery] = useState('');\n  const [dropdownDisplayStyle, setDropdownDisplayStyle] = useState('none');\n  const [suggestions, setSuggestions] = useState([] as Suggestion[]);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n\n  function getLastQueryWord(text: string): string {\n    if (!text) {\n      return text;\n    }\n    const words = text.split(' ').filter((it: string) => it.length > 0);\n    return words[words.length - 1];\n  }\n\n  function setDropDownVisible(visible: boolean) {\n    setDropdownDisplayStyle(visible ? 'block' : 'none');\n  }\n\n  async function handleChange(event: any) {\n    const text = event.target.value || '';\n    const lastWord = getLastQueryWord(text);\n    try {\n      const suffixes = await api.getAutocompleteSuffixes(lastWord);\n      setSuggestions(\n        suffixes.map((suffix) => ({\n          complete: lastWord + suffix,\n          suffix,\n        }))\n      );\n    } catch (err) {\n      const message = `ERROR: ${err.message}`;\n      setSuggestions([\n        {\n          complete: message,\n          suffix: message,\n        },\n      ]);\n    }\n    setDropDownVisible(true);\n    setQuery(text);\n  }\n\n  async function search(query: string) {\n    dispatch(updatePathsForQuery(query));\n    setDropDownVisible(false);\n    dispatch(queryUpdated(query));\n    dispatch(sidePanelVisibilityChanged(true));\n  }\n\n  function clearSearch() {\n    setQuery('');\n    setDropDownVisible(false);\n    dispatch(pathsUpdated(undefined));\n    dispatch(queryUpdated(''));\n    dispatch(sidePanelVisibilityChanged(true));\n  }\n\n  function appendSuggestionSuffix(suffix: string) {\n    const completeQuery = query.toLowerCase() + suffix.toLowerCase();\n    setQuery(completeQuery);\n    setDropDownVisible(false);\n    return completeQuery;\n  }\n\n  useEffect(() => {\n    document.addEventListener('click', (event) => {\n      if (ref.current && !(ref.current as any).contains(event.target)) {\n        setDropDownVisible(false);\n      }\n    });\n  }, []);\n\n  async function onKeyUp(e: any) {\n    if (e.key === 'Escape') {\n      setDropDownVisible(false);\n      return;\n    } else if (e.key === 'Enter') {\n      e.preventDefault();\n      if (dropdownDisplayStyle !== 'none') {\n        const selectedSuggestion = suggestions[selectedIndex];\n        let queryToUse = query;\n        if (selectedSuggestion) {\n          queryToUse = appendSuggestionSuffix(selectedSuggestion.suffix);\n        }\n        await search(queryToUse);\n      } else {\n        await search(query);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      setDropDownVisible(true);\n      setSelectedIndex(Math.min(selectedIndex + 1, suggestions.length - 1));\n      return;\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      setDropDownVisible(true);\n      setSelectedIndex(Math.max(selectedIndex - 1, 0));\n      return;\n    }\n  }\n\n  return (\n    <span className={styles.searchArea}>\n      <input\n        type=\"text\"\n        id=\"search-input\"\n        className={styles.search}\n        aria-label=\"search\"\n        value={query}\n        onChange={handleChange}\n        onKeyUp={onKeyUp}\n      />\n      <button\n        type=\"button\"\n        className={styles.button}\n        onClick={() => search(query)}\n      >\n        Search\n      </button>\n      <button type=\"button\" className={styles.button} onClick={clearSearch}>\n        Reset\n      </button>\n      <div\n        ref={ref}\n        className={styles.searchDropdown}\n        style={{ display: dropdownDisplayStyle }}\n      >\n        {suggestions.map((suggestion, index) => (\n          <div\n            key={suggestion.complete.toLowerCase()}\n            onClick={() => appendSuggestionSuffix(suggestion.suffix)}\n            className={\n              index === selectedIndex\n                ? styles.searchDropdownItemSelected\n                : styles.searchDropdownItem\n            }\n          >\n            <div>{suggestion.complete.toLowerCase()}</div>\n          </div>\n        ))}\n      </div>\n    </span>\n  );\n};\n","import styles from './GitHubIcon.module.css';\n\nexport const GitHubIcon = () => {\n  return (\n    <button className={styles.githubIconContainer}>\n      <a href=\"https://github.com/DominicKramer/codex\">\n        <svg\n          fill=\"#cccccc\"\n          width=\"1.2em\"\n          height=\"1.2em\"\n          role=\"img\"\n          viewBox=\"0 0 24 24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <title>GitHub</title>\n          <path\n            d=\"M12\n                  .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577\n                  0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7\n                  3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07\n                  1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93\n                  0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3\n                  1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23\n                  3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805\n                  5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0\n                  .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\"\n          />\n        </svg>\n      </a>\n    </button>\n  );\n};\n","import styles from './TopBar.module.css';\n\nimport { SidePanelButton } from '../side-panel-button/SidePanelButton';\nimport { SearchPanel } from '../search-panel/SearchPanel';\nimport { GitHubIcon } from '../github-icon/GitHubIcon';\n\nexport const TopBar = () => {\n  return (\n    <div className={styles.topbar}>\n      <SidePanelButton />\n      <SearchPanel />\n      <GitHubIcon />\n    </div>\n  );\n};\n","import styles from './App.module.css';\n\nimport React from 'react';\nimport { Page } from './components/page/Page';\nimport { SidePanel } from './components/side-panel/SidePanel';\nimport { TopBar } from './components/topbar/TopBar';\n\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nexport const App = () => {\n  return (\n    <Router>\n      <ErrorBoundary>\n        <TopBar />\n        <SidePanel />\n        <div className={styles.contentPanel}>\n          <Switch>\n            <Route path=\"/*\" children={<Page />} />\n          </Switch>\n        </div>\n      </ErrorBoundary>\n    </Router>\n  );\n};\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n}\n\nclass ErrorBoundary extends React.Component<{}, ErrorBoundaryState> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      hasError: false,\n    };\n  }\n\n  componentDidCatch(error: any, info: any) {\n    this.setState({\n      hasError: true,\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <p>\n          An error occurred connecting to the MathLingua server. Are you running{' '}\n          <code>mlg serve</code>?\n        </p>\n      );\n    } else {\n      return this.props.children;\n    }\n  }\n}\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\n\nimport thunkMiddleware from 'redux-thunk';\n\nimport pathsReducer from './pathsSlice';\nimport sidePanelVisibleReducer from './sidePanelVisibleSlice';\nimport viewedPathReducer from './viewedPathSlice';\nimport queryReducer from './querySlice';\n\nexport const store = configureStore({\n  reducer: {\n    sidePanelVisible: sidePanelVisibleReducer,\n    paths: pathsReducer,\n    viewedPath: viewedPathReducer,\n    query: queryReducer,\n  },\n  middleware: [thunkMiddleware],\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport { store } from './store/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './support/serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidePanel\":\"SidePanel_sidePanel__2wshc\",\"sidePanelContent\":\"SidePanel_sidePanelContent__1LQuN\",\"sidePanelItem\":\"SidePanel_sidePanelItem__2Uvvj\",\"selected\":\"SidePanel_selected__3iDL5\",\"mathlinguaHomeItem\":\"SidePanel_mathlinguaHomeItem__2WfpH\",\"mathlinguaListDirItem\":\"SidePanel_mathlinguaListDirItem__35D6Z\",\"mathlinguaListFileItem\":\"SidePanel_mathlinguaListFileItem__fS2vD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"triangle\":\"PathTreeItem_triangle__1r7e7\",\"link\":\"PathTreeItem_link__2zHfD\",\"sidePanelItem\":\"PathTreeItem_sidePanelItem__1A12M\",\"mathlinguaListDirItem\":\"PathTreeItem_mathlinguaListDirItem__3BEwG\",\"mathlinguaListFileItem\":\"PathTreeItem_mathlinguaListFileItem__1JNHt\",\"selected\":\"PathTreeItem_selected__r_5l2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchArea\":\"SearchPanel_searchArea__3eH01\",\"search\":\"SearchPanel_search__2HQuA\",\"searchDropdown\":\"SearchPanel_searchDropdown__24NWE\",\"searchDropdownItem\":\"SearchPanel_searchDropdownItem__3wg4x\",\"searchDropdownItemSelected\":\"SearchPanel_searchDropdownItemSelected__20Nxq\",\"button\":\"SearchPanel_button__12eOc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mathlinguaPage\":\"Page_mathlinguaPage__316SN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mathlinguaTopLevel\":\"TopLevelEntry_mathlinguaTopLevel__tOe0D\",\"mathlinguaFlipIcon\":\"TopLevelEntry_mathlinguaFlipIcon__-3nJ2\",\"mathlinguaCloseButton\":\"TopLevelEntry_mathlinguaCloseButton__o8PUx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"entitiesPanel\":\"EntitiesPanel_entitiesPanel__1Sx74\",\"entitiesPanelItem\":\"EntitiesPanel_entitiesPanelItem__1Xi0s\",\"closeAllButton\":\"EntitiesPanel_closeAllButton__1uj94\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topLevelEntityGroup\":\"TopLevelEntityGroup_topLevelEntityGroup__MMFuW\",\"triangle\":\"TopLevelEntityGroup_triangle__7AIJb\",\"triangleBorder\":\"TopLevelEntityGroup_triangleBorder__2sXGm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorLabel\":\"ErrorView_errorLabel__2AXEh\",\"errorMessage\":\"ErrorView_errorMessage__2gtow\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"contentPanel\":\"App_contentPanel__1ZGS7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mathlinguaBlockCommentTopLevel\":\"BlockComment_mathlinguaBlockCommentTopLevel__dhGBJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mathlinguaHome\":\"Home_mathlinguaHome__189Q7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"topbar\":\"TopBar_topbar__2sxmu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidePanelButton\":\"SidePanelButton_sidePanelButton__u4HAg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"githubIconContainer\":\"GitHubIcon_githubIconContainer__3BhmA\"};"],"sourceRoot":""}